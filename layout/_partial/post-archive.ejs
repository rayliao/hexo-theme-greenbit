<div class="archive">
    <%- list_tags({orderby: 'length', order: -1, transform(str) { return '#' + str}}) %>
    <%
        var year = 0
        var change = false
    %>
    <% page.posts.each(function(item) { %>
    <%
            var itemYear = date(item.date, 'YYYY') - 0
            change = year !== itemYear
            year = change ? itemYear : year
        %>
    <% if(change) { %>
    <h2 class="archive-year"><%= year %></h2>
    <% } %>
    <div class="post-item">
        <%- partial('post-info', {item: item}) %>
        <a href="<%- url_for(item.path) %>" class="post-title-link"><%= item.title %></a>
    </div>
    <% }) %>
</div>